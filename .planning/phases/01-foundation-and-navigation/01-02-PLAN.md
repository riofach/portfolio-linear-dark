---
phase: 1
wave: 2
name: navigation_shell
depends_on: [foundation_setup]
autonomous: true
files_modified:
  - src/components/layout/Header.tsx
  - src/components/layout/MobileMenu.tsx
  - src/app/layout.tsx
  - src/app/page.tsx
---

# Phase 1: Navigation Shell

## Goal
Implement the responsive, sticky, glassmorphism navigation header with scroll intelligence, progress tracking, and active state management.

## Context
The navigation needs to be "Smart" (hide on scroll down, show on scroll up), have a "Linear" aesthetic, and provide "Luxury" SPA features like a scroll progress bar and active section tracking (Scroll Spy).

## Tasks

<task>
<instruction>
Create the Navigation Component Structure.
1. Create `src/components/layout/Header.tsx`.
   - Use "use client".
   - Import `motion` from `motion/react`.
   - Import `useScroll`, `useMotionValueEvent`, `useSpring` from `motion/react`.
</instruction>
<verification>
- File exists.
</verification>
</task>

<task>
<instruction>
Implement Scroll Progress Bar.
1. In `Header.tsx` (or a sub-component):
   - Use `const { scrollYProgress } = useScroll()`.
   - Use `useSpring` to smooth the progress value (e.g., stiffness: 100, damping: 30, restDelta: 0.001).
   - Render a `motion.div` at the bottom of the header (absolute positioned).
   - Style: Height `1px`, width `100%`, `origin-left`, `scaleX` bound to the spring value.
   - Color: Use a subtle accent (e.g., white or zinc-500) to indicate depth.
</instruction>
<verification>
- Progress bar renders and grows as user scrolls.
</verification>
</task>

<task>
<instruction>
Implement Sticky Logic & Styling.
1. In `Header.tsx`:
   - State `hidden` (boolean).
   - `useMotionValueEvent` to track `latest` scroll Y.
   - Logic: If `latest > previous` and `latest > 150`, set hidden true. Else false.
   - Render a `<motion.header>`:
     - Variants: `visible: { y: 0 }`, `hidden: { y: "-100%" }`.
     - Class: `fixed top-0 w-full z-50 backdrop-blur-md bg-zinc-950/70 border-b border-white/5`.
   - Inner content: Container with Logo (Text) and Desktop Nav Links.
</instruction>
<verification>
- Header hides when simulated scroll logic triggers.
- Styling uses backdrop filter.
</verification>
</task>

<task>
<instruction>
Implement Scroll Spy & Active State Links.
1. Create a `NavLinks` component.
2. Implement a "Scroll Spy" mechanism:
   - Use `IntersectionObserver` or check `window.scrollY` against section offsets.
   - State `activeSection` (string).
   - **Requirement:** Update the URL hash (`window.history.replaceState`) when a section becomes active, but ensure it doesn't cause jumpy scrolling.
3. Links: About, Work, Skills, Contact.
   - If `activeSection` matches link, apply active style (e.g., brighter white text vs. muted zinc-400).
   - On click, smooth scroll to section.
</instruction>
<verification>
- Links change color based on currently viewed section.
- URL hash updates while scrolling.
</verification>
</task>

<task>
<instruction>
Implement Mobile Menu.
1. Create `src/components/layout/MobileMenu.tsx`.
2. State `isOpen`.
3. Button: Hamburger icon (Lucide `Menu`, `X`).
4. Panel: `<AnimatePresence>` + `<motion.div>` dropdown.
   - Position: Absolute below header or Fixed full screen?
   - Decision from context: "Dropdown menu... rather than a side-drawer".
   - Style: `absolute top-full left-0 w-full bg-zinc-950 border-b border-white/10 p-4 flex flex-col gap-4`.
5. Integrate `MobileMenu` into `Header.tsx` (display on `md:hidden`).
</instruction>
<verification>
- Mobile menu toggles on state change.
- Responsive visibility (hidden on desktop).
</verification>
</task>

<task>
<instruction>
Mount Navigation in Root Layout.
1. Open `src/app/layout.tsx`.
2. Import the `Header` component.
3. Place `<Header />` inside the `<body>` (or inside the `Lenis` wrapper if applicable), *before* the `{children}`.
   - Ensure it is fixed/sticky so it sits above the content.
</instruction>
<verification>
- `src/app/layout.tsx` imports and renders `<Header />`.
</verification>
</task>

<task>
<instruction>
Update Page Content for Testing.
1. Update `src/app/page.tsx`.
2. Add dummy sections with IDs (`section id="about"`, `id="work"`, etc.).
3. Give them `min-h-screen` and alternating background colors (subtle) so we can test scrolling.
</instruction>
<verification>
- Page is scrollable.
- Header interacts correctly with scroll.
- Active state updates on scroll.
</verification>
</task>

## Must Haves
- Header stays fixed/sticky.
- Header hides on scroll down, shows on up.
- Scroll Progress Bar visible at top.
- Navigation links highlight active section (Scroll Spy).
- URL hash updates on scroll.
- Mobile menu opens/closes with animation.
- Header is correctly rendered in `layout.tsx`.
