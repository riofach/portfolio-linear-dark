---
phase: 01-foundation-and-navigation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/layout.tsx
autonomous: true
gap_closure: true
user_setup: []

must_haves:
  truths:
    - "Application text renders using Geist Sans font"
    - "No hydration errors in browser console"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Tailwind v4 font configuration"
      contains: "--font-sans"
    - path: "src/app/layout.tsx"
      provides: "Root layout with font application"
      contains: "font-sans"
  key_links:
    - from: "src/app/globals.css"
      to: "Tailwind Engine"
      via: "@theme block"
      pattern: "--font-sans:.*Geist"
---

<objective>
Fix font rendering issue where application defaults to Segoe UI instead of Geist Sans, and ensure hydration stability.

Purpose: Polish the visual foundation by ensuring the correct branding font is applied globally via Tailwind v4.
Output: Updated global CSS and layout files with correct font configuration.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-foundation-and-navigation/01-01-SUMMARY.md
@src/app/globals.css
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Tailwind v4 Font Configuration</name>
  <files>src/app/globals.css</files>
  <action>
    Modify `src/app/globals.css` to correctly define the font family for Tailwind v4.
    
    1. Locate the `@theme` block (or create it if missing, though it should exist from 01-01).
    2. Ensure the CSS variable for Geist (e.g., `--font-geist-sans`) is correctly mapped to the Tailwind `font-sans` utility.
    
    Expected pattern for Tailwind v4:
    ```css
    @theme {
      --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
    }
    ```
    
    Ensure that the variable `--font-geist-sans` matches what is exported by `next/font/google` in the layout (usually passed as a CSS variable).
  </action>
  <verify>
    grep -- "--font-sans" src/app/globals.css
  </verify>
  <done>
    `src/app/globals.css` contains correct `--font-sans` mapping in `@theme` block.
  </done>
</task>

<task type="auto">
  <name>Task 2: Apply Font Utility to Layout</name>
  <files>src/app/layout.tsx</files>
  <action>
    Update `src/app/layout.tsx` to apply the font class globally.
    
    1. Ensure the `Geist` font loader is configured with a `variable` (e.g., `variable: "--font-geist-sans"`).
    2. Add the `font-sans` utility class to the `<body>` tag.
    3. Add the font variable (e.g., `geistSans.variable`) to the `<body>` className or strictly strictly to the `html` tag if that's the Next.js pattern being used, but usually body class combined with `antialiased`.
    4. CRITICAL: Preserve `suppressHydrationWarning` on the `<body>` (or `<html>`) tag to prevent hydration mismatches from browser extensions (bis_register issue).
  </action>
  <verify>
    grep "font-sans" src/app/layout.tsx && grep "suppressHydrationWarning" src/app/layout.tsx
  </verify>
  <done>
    `layout.tsx` has `font-sans` class, injects the CSS variable, and retains hydration warning suppression.
  </done>
</task>

</tasks>

<verification>
Manual check (since visual):
1. Load page in browser.
2. Inspect element on body text.
3. Verify `font-family` computed style starts with "Geist Sans".
</verification>

<success_criteria>
- [ ] Global CSS defines `--font-sans` mapping
- [ ] Layout applies `font-sans` and injects variable
- [ ] No hydration errors in console
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-navigation/01-03-SUMMARY.md`
</output>
