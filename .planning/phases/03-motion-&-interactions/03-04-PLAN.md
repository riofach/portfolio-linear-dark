---
phase: 03-motion-&-interactions
plan: 04
type: execute
wave: 3
depends_on: [03-02]
files_modified:
  - src/components/sections/contact-section.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Contact form validates email format"
    - "Submit button shows loading state on click"
    - "Success message appears after simulation"
    - "Invalid inputs show error styling"
  artifacts:
    - path: "src/components/sections/contact-section.tsx"
      provides: "Interactive form"
      contains: "useForm"
  key_links:
    - from: "src/components/sections/contact-section.tsx"
      to: "zod"
      via: "schema validation"
---

<objective>
Implement client-side validation and state management for the Contact Form.

Purpose: Provide immediate feedback and a functional feel, even without backend.
Output: Validated form with loading/success states.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-motion-&-interactions/03-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Validation Deps</name>
  <files>package.json</files>
  <action>
    Install `zod` and `react-hook-form` and `@hookform/resolvers`.
    `npm install zod react-hook-form @hookform/resolvers`
  </action>
  <verify>
    - `npm list zod` returns version.
  </verify>
  <done>Dependencies installed.</done>
</task>

<task type="auto">
  <name>Task 2: Implement Form Logic</name>
  <files>src/components/sections/contact-section.tsx</files>
  <action>
    Modify `ContactSection` (or internal Form component):
    1. Define Zod schema: `name` (min 2), `email` (email), `message` (min 10).
    2. Setup `useForm` with `zodResolver`.
    3. Add `onSubmit` handler:
       - Set `isSubmitting` state.
       - Simulate delay (1.5s).
       - Set `isSuccess` state.
       - Reset form.
    4. Bind inputs to `register`.
    5. Show validation errors (red text/border) using `motion` (shake or fade-in).
  </action>
  <verify>
    - Imports `useForm`, `zod`.
    - Handles submit event.
  </verify>
  <done>Form has validation and simulation logic.</done>
</task>

<task type="auto">
  <name>Task 3: Add Success/Loading UI</name>
  <files>src/components/sections/contact-section.tsx</files>
  <action>
    1. Update Submit Button:
       - Show spinner when `isSubmitting`.
       - Disable when loading.
    2. Add Success Message:
       - If `isSuccess`, replace form or show toast/banner saying "Message sent (simulated)".
       - Use `AnimatePresence` for smooth switch between form and success message.
  </action>
  <verify>
    - UI handles `isSubmitting` and `isSuccess` states.
  </verify>
  <done>Form feedback UI complete.</done>
</task>

</tasks>

<verification>
- Invalid email triggers error.
- Valid submit shows loading then success.
</verification>

<success_criteria>
- User cannot submit invalid data.
- User gets clear feedback on interaction.
</success_criteria>

<output>
After completion, create `.planning/phases/03-motion-&-interactions/03-04-SUMMARY.md`
</output>
