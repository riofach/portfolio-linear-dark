---
phase: 03-motion-interactions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/layout.tsx
  - src/app/template.tsx
  - src/lib/motion.ts
  - src/components/ui/motion-wrapper.tsx
  - package.json
autonomous: true
must_haves:
  truths:
    - "Native browser scroll is active (no Lenis)"
    - "Pages crossfade when navigating"
    - "Animation constants are centralized"
  artifacts:
    - path: "src/lib/motion.ts"
      provides: "SPRING_SUBTLE, FADE_UP, STAGGER constants"
    - path: "src/app/template.tsx"
      provides: "Page transition wrapper"
  key_links:
    - from: "src/app/template.tsx"
      to: "src/lib/motion.ts"
      via: "import constants"
---

<objective>
Initialize the motion foundation for the application.

Purpose: Establish the "Linear-like" physics system, enable page transitions, and remove conflicting scroll libraries to meet Phase 3 requirements.
Output: Centralized motion config, reusable wrappers, and a clean scroll environment.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-motion-interactions/03-motion-interactions-CONTEXT.md
@.planning/phases/03-motion-interactions/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean up Scroll Engine</name>
  <files>src/app/layout.tsx, package.json</files>
  <action>
    - Remove `ReactLenis` wrapper and import from `src/app/layout.tsx`.
    - Uninstall `lenis` or `@studio-freight/react-lenis` from package.json via npm/pnpm.
    - Ensure `html` and `body` tags are clean of scroll-jacking classes.
  </action>
  <verify>
    grep "Lenis" src/app/layout.tsx; [ $? -ne 0 ] && echo "Clean"
  </verify>
  <done>Layout is free of Lenis, scroll is native.</done>
</task>

<task type="auto">
  <name>Task 2: Create Motion Configuration</name>
  <files>src/lib/motion.ts</files>
  <action>
    Create `src/lib/motion.ts` with exported constants for "Linear" feel:
    - `SPRING_SUBTLE`: { type: "spring", stiffness: 300, damping: 30, mass: 1 }
    - `FADE_UP`: Variants for { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 } }
    - `FADE_IN`: Variants for { initial: { opacity: 0 }, animate: { opacity: 1 } }
    - `STAGGER`: Variants for staggerChildren (0.1s delay)
    - `VIEWPORT_CONFIG`: { once: true, margin: "-10%" }
  </action>
  <verify>test -f src/lib/motion.ts</verify>
  <done>Motion constants are available for import.</done>
</task>

<task type="auto">
  <name>Task 3: Implement Page Transitions & Wrappers</name>
  <files>src/app/template.tsx, src/components/ui/motion-wrapper.tsx</files>
  <action>
    1. Create `src/app/template.tsx`:
       - Use "use client"
       - Import `motion` from "motion/react"
       - Wrap children in motion.div with opacity crossfade (exit/enter)
       - Use a unique key (pathName) if needed, or rely on template behavior (remounts on nav).
    
    2. Create `src/components/ui/motion-wrapper.tsx`:
       - Export `<FadeIn delay={0} className>` component using `FADE_UP` and `VIEWPORT_CONFIG`.
       - Export `<StaggerContainer className>` component using `STAGGER` and `VIEWPORT_CONFIG`.
       - Use `motion` from "motion/react".
  </action>
  <verify>test -f src/app/template.tsx && test -f src/components/ui/motion-wrapper.tsx</verify>
  <done>Page transitions active, reusable components created.</done>
</task>

</tasks>

<verification>
- Check layout.tsx has no Lenis
- Check template.tsx exists
- Check motion.ts exports expected constants
</verification>

<success_criteria>
- Native scroll behavior restored
- Page transitions occur on route change
- Reusable motion components ready for feature implementation
</success_criteria>

<output>
After completion, create .planning/phases/03-motion-interactions/03-01-SUMMARY.md
</output>
