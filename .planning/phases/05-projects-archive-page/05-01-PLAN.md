---
phase: 05-projects-archive-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/components/layout/NavLinks.tsx
  - src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Navigation links work from non-home pages (redirect to /#section)"
    - "Home page 'View all projects' button links to /allprojects"
    - "Grid pattern CSS utility is available"
  artifacts:
    - path: "src/app/globals.css"
      provides: "bg-grid-pattern utility"
    - path: "src/components/layout/NavLinks.tsx"
      provides: "Path-aware navigation logic"
  key_links:
    - from: "src/components/layout/NavLinks.tsx"
      to: "src/app/layout.tsx"
      via: "imported in Header"
---

<objective>
Update global styles and navigation logic to support the multi-page architecture required for the Projects Archive.

Purpose: Ensure consistent visual foundation and unbroken navigation before creating the new route.
Output: Updated CSS utilities and a robust navigation component that handles cross-page links.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/components/layout/NavLinks.tsx
@src/app/globals.css
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Grid Pattern Utility</name>
  <files>src/app/globals.css</files>
  <action>
    Add the `bg-grid-pattern` utility to `src/app/globals.css` to match the reference design.
    
    Add this CSS (or equivalent Tailwind @utility):
    ```css
    @layer utilities {
      .bg-grid-pattern {
        background-image: linear-gradient(to right, #1E2029 1px, transparent 1px),
                          linear-gradient(to bottom, #1E2029 1px, transparent 1px);
        background-size: 40px 40px;
      }
    }
    ```
    Ensure colors match the project's linear-dark theme (using existing vars if possible, e.g. white/[0.05]).
  </action>
  <verify>grep "bg-grid-pattern" src/app/globals.css</verify>
  <done>Utility class exists in globals.css</done>
</task>

<task type="auto">
  <name>Task 2: Enable Cross-Page Navigation</name>
  <files>src/components/layout/NavLinks.tsx</files>
  <action>
    Update `NavLinks` to handle navigation correctly when NOT on the home page.
    
    1. Import `usePathname` from `next/navigation`.
    2. Check if `pathname === '/'`.
    3. Update `handleScroll`:
       - If on Home (`/`): Keep existing scroll-into-view logic.
       - If NOT on Home: Allow default `Link` behavior (navigate to `/#section`).
    4. Update `Link` href:
       - Ensure hrefs are absolute paths with hashes (e.g., `/#projects` instead of `#projects`) OR dynamically switch based on location.
       - Recommended: Always use `/#section` for the href, but intercept click on Home.
  </action>
  <verify>Check NavLinks.tsx source code for usePathname and conditional logic</verify>
  <done>NavLinks correctly handles both same-page scrolling and cross-page navigation</done>
</task>

<task type="auto">
  <name>Task 3: Link 'View All' Button</name>
  <files>src/app/page.tsx</files>
  <action>
    Update the "View all projects" button in the Projects section of the Home page.
    - Change target from `#` or empty to `/allprojects`.
    - Ensure it uses the Next.js `Link` component for client-side transition.
  </action>
  <verify>grep "/allprojects" src/app/page.tsx</verify>
  <done>Home page button links to the archive page</done>
</task>

</tasks>

<verification>
- Styles build successfully (`npm run build` check if possible, or visually)
- Navigation logic covers both "/" and "/other" cases
</verification>

<success_criteria>
- Global CSS contains required pattern
- Navigation works from Home (smooth scroll)
- Navigation works from other pages (redirects to Home section)
</success_criteria>

<output>
After completion, create `.planning/phases/05-projects-archive-page/05-01-SUMMARY.md`
</output>
